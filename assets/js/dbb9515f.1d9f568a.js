"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3073],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var t=s(96540);const r={},o=t.createContext(r);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},66566:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"labs/workshops/react-springboot-Workshop/nodejs-backend-crud-rest-api","title":"NodeJS Backend Rest API","description":"In this chapter, we will focus on creating a NodeJS application that serves as a backend REST API for performing CRUD (Create, Read, Update, Delete) operations on Public Toilets APP.","source":"@site/docs/labs/workshops/react-springboot-Workshop/8-nodejs-backend-rest-api.md","sourceDirName":"labs/workshops/react-springboot-Workshop","slug":"/labs/workshops/react-springboot-Workshop/nodejs-backend-crud-rest-api","permalink":"/docs/labs/workshops/react-springboot-Workshop/nodejs-backend-crud-rest-api","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"nodejs","permalink":"/docs/tags/nodejs"},{"inline":true,"label":"rest services","permalink":"/docs/tags/rest-services"},{"inline":true,"label":"restjs","permalink":"/docs/tags/restjs"}],"version":"current","sidebarPosition":8,"frontMatter":{"id":"nodejs-backend-crud-rest-api","title":"NodeJS Backend Rest API","tags":["nodejs","rest services","restjs"]}}');var r=s(74848),o=s(28453);const i={id:"nodejs-backend-crud-rest-api",title:"NodeJS Backend Rest API",tags:["nodejs","rest services","restjs"]},l="Building a NodeJS and ExpresJS Backend REST API for CRUD Operations",a={},d=[{value:"Setting up the Development Environment",id:"setting-up-the-development-environment",level:2},{value:"Step 1: Install Node.js",id:"step-1-install-nodejs",level:3},{value:"Step 2: Verify the Installation",id:"step-2-verify-the-installation",level:3},{value:"Step 3: Create a Project Directory",id:"step-3-create-a-project-directory",level:3},{value:"Step 4: Initialize a Node.js Project",id:"step-4-initialize-a-nodejs-project",level:3},{value:"Step 5: Install Dependencies",id:"step-5-install-dependencies",level:3},{value:"Step 6: Create a Basic Server",id:"step-6-create-a-basic-server",level:3},{value:"Step 7: Start the Server",id:"step-7-start-the-server",level:3},{value:"Step 8: Test the server",id:"step-8-test-the-server",level:3},{value:"REST API For PublicToilets Usecase",id:"rest-api-for-publictoilets-usecase",level:2},{value:"Updated server.js Code",id:"updated-serverjs-code",level:3},{value:"Test Rest Endpoints",id:"test-rest-endpoints",level:3},{value:"Database",id:"database",level:2},{value:"Install PostgreSQL Database",id:"install-postgresql-database",level:3},{value:"Learn PostgreSQL",id:"learn-postgresql",level:3},{value:"Update Nodejs/Express app to use PostgreSQL",id:"update-nodejsexpress-app-to-use-postgresql",level:3},{value:"Update public toilets CRUD operation",id:"update-public-toilets-crud-operation",level:3},{value:"Enable CORS",id:"enable-cors",level:2},{value:"Github Repo",id:"github-repo",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"building-a-nodejs-and-expresjs-backend-rest-api-for-crud-operations",children:"Building a NodeJS and ExpresJS Backend REST API for CRUD Operations"})}),"\n",(0,r.jsx)(n.p,{children:"In this chapter, we will focus on creating a NodeJS application that serves as a backend REST API for performing CRUD (Create, Read, Update, Delete) operations on Public Toilets APP."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["This chapter is part of the ReactJS frontend application, and Spring Boot OR NodeJS backend Rest API workshop series. While it can be followed independently to create a Node.js backend application, we suggest starting from the beginning to get the full context and benefit from the step-by-step learning experience. The complete workshop series can be found ",(0,r.jsx)(n.a,{href:"/docs/labs/workshops/react-springboot-Workshop/reactjs-springboot-overview",children:"here"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-the-development-environment",children:"Setting up the Development Environment"}),"\n",(0,r.jsx)(n.p,{children:"Before we start developing the Node.js backend Rest Services, it's important to ensure that your local environment is set up. Follow these steps to set up Node.js and create an initial app:"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-install-nodejs",children:"Step 1: Install Node.js"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Visit the official Node.js website: ",(0,r.jsx)(n.a,{href:"https://nodejs.org",children:"https://nodejs.org"})]}),"\n",(0,r.jsx)(n.li,{children:"Download the LTS (Long-Term Support) version for your operating system."}),"\n",(0,r.jsx)(n.li,{children:"Run the installer and follow the instructions to complete the installation."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-verify-the-installation",children:"Step 2: Verify the Installation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Open a terminal or command prompt."}),"\n",(0,r.jsxs)(n.li,{children:["Run the following command to check if Node.js and npm (Node Package Manager) are installed:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"node -v\nnpm -v\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"You should see the version numbers of Node.js and npm if the installation was successful."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-create-a-project-directory",children:"Step 3: Create a Project Directory"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Choose a directory where you want to create your Node.js project and navigate to that directory."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir nodejs-backend-rest-api\ncd nodejs-backend-rest-api\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:["If you are following the workshop from the beginning, you can create the directory inside the ",(0,r.jsx)(n.code,{children:"reactjs-springboot-workshop"})," folder in the ",(0,r.jsx)(n.code,{children:"workshops"})," repository."]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Clone the repository: Run the following command to clone the repository to your local machine:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/certifysphere/workshops.git\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to the workshop directory: Change to the ",(0,r.jsx)(n.code,{children:"reactjs-springboot-workshop"})," directory:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd workshops/reactjs-springboot-workshop\n"})}),"\n"]}),"\n"]}),(0,r.jsxs)(n.p,{children:["Now you can proceed with creating the directory for your Node.js backend Rest Services inside the ",(0,r.jsx)(n.code,{children:"reactjs-springboot-workshop"})," directory."]})]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-initialize-a-nodejs-project",children:"Step 4: Initialize a Node.js Project"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Run the following command to initialize a new Node.js project inside ",(0,r.jsx)(n.code,{children:"nodejs-backend-rest-api"})," directory:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"npm init -y\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"This command creates a default package.json file with the project configuration."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-install-dependencies",children:"Step 5: Install Dependencies"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Install Express.js: Express.js is a popular web framework for Node.js. Install it as a dependency for your project by running the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"npm install express\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This command installs Express.js and adds it as a dependency in the package.json file."}),"\n",(0,r.jsx)(n.h3,{id:"step-6-create-a-basic-server",children:"Step 6: Create a Basic Server"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a new file named ",(0,r.jsx)(n.code,{children:"server.js"})," in your project directory.This file will serve as the entry point for your application."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open ",(0,r.jsx)(n.code,{children:"server.js"})," in a text editor or VS Code."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add the following code to create a basic server using the Express framework:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst app = express();\nconst port = 3000; // Replace with your desired port number\n\n// Define a route\napp.get('/', (req, res) => {\n  res.send('Hello, world!');\n});\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on port ${port}`);\n});\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-7-start-the-server",children:"Step 7: Start the Server"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Open a terminal or command prompt."}),"\n",(0,r.jsx)(n.li,{children:"Navigate to your project directory."}),"\n",(0,r.jsxs)(n.li,{children:["Run the following command to start the server:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"node server.js\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"You should see a message indicating that the server is running on the specified port."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-8-test-the-server",children:"Step 8: Test the server"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Open a web browser and navigate to ",(0,r.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"}),'. You should see the message "Hello, world!" displayed in the browser, indicating that the server is running successfully.']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Congratulations! You have set up your Node.js development environment and created a basic Express server. You can now proceed with developing the Node.js backend Rest Services by adding routes, controllers, and other necessary components to build your REST API."}),"\n",(0,r.jsx)(n.h2,{id:"rest-api-for-publictoilets-usecase",children:"REST API For PublicToilets Usecase"}),"\n",(0,r.jsxs)(n.p,{children:['In the previous section, we created a basic server app using Express.js that returns "Hello World!" when accessing the root URL of the server app (',(0,r.jsx)(n.a,{href:"http://localhost:3002",children:"http://localhost:3002"}),"). Now, we will add new endpoints to the ",(0,r.jsx)(n.code,{children:"server.js"})," file to enable CRUD operations (Create, Retrieve, Update, Delete) for our Public Toilets sample app or any other server REST API app."]}),"\n",(0,r.jsx)(n.h3,{id:"updated-serverjs-code",children:"Updated server.js Code"}),"\n",(0,r.jsxs)(n.p,{children:["Replace the code in the ",(0,r.jsx)(n.code,{children:"server.js"})," file with the following:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst bodyParser = require('body-parser');\n\nconst app = express();\nconst port = 3002;\n\n// Middleware\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\n\n// Public Toilets Data (replace this with your database or data source)\nlet publicToilets = [\n  { id: 1, name: 'Toilet 1', location: 'Location 1' },\n  { id: 2, name: 'Toilet 2', location: 'Location 2' },\n];\n\n// Get all public toilets\napp.get('/public-toilets', (req, res) => {\n  res.json(publicToilets);\n});\n\n// Get a specific public toilet by ID\napp.get('/public-toilets/:id', (req, res) => {\n  const id = parseInt(req.params.id);\n  const toilet = publicToilets.find((toilet) => toilet.id === id);\n\n  if (toilet) {\n    res.json(toilet);\n  } else {\n    res.status(404).json({ message: 'Public toilet not found' });\n  }\n});\n\n// Create a new public toilet\napp.post('/public-toilets', (req, res) => {\n  const { name, location } = req.body;\n  const id = publicToilets.length + 1;\n  const newToilet = { id, name, location };\n\n  publicToilets.push(newToilet);\n\n  res.status(201).json(newToilet);\n});\n\n// Update an existing public toilet\napp.put('/public-toilets/:id', (req, res) => {\n  const id = parseInt(req.params.id);\n  const { name, location } = req.body;\n  const toilet = publicToilets.find((toilet) => toilet.id === id);\n\n  if (toilet) {\n    toilet.name = name;\n    toilet.location = location;\n\n    res.json(toilet);\n  } else {\n    res.status(404).json({ message: 'Public toilet not found' });\n  }\n});\n\n// Delete a public toilet\napp.delete('/public-toilets/:id', (req, res) => {\n  const id = parseInt(req.params.id);\n  const index = publicToilets.findIndex((toilet) => toilet.id === id);\n\n  if (index !== -1) {\n    const deletedToilet = publicToilets.splice(index, 1);\n    res.json(deletedToilet[0]);\n  } else {\n    res.status(404).json({ message: 'Public toilet not found' });\n  }\n});\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on port ${port}`);\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This updated ",(0,r.jsx)(n.code,{children:"server.js"})," file includes the following CRUD endpoints:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["GET ",(0,r.jsx)(n.code,{children:"/public-toilets"}),": Retrieves all public toilets."]}),"\n",(0,r.jsxs)(n.li,{children:["GET ",(0,r.jsx)(n.code,{children:"/public-toilets/:id"}),": Retrieves a specific public toilet by its ID."]}),"\n",(0,r.jsxs)(n.li,{children:["POST ",(0,r.jsx)(n.code,{children:"/public-toilets"}),": Creates a new public toilet."]}),"\n",(0,r.jsxs)(n.li,{children:["PUT ",(0,r.jsx)(n.code,{children:"/public-toilets/:id"}),": Updates an existing public toilet."]}),"\n",(0,r.jsxs)(n.li,{children:["DELETE ",(0,r.jsx)(n.code,{children:"/public-toilets/:id"}),": Deletes a public toilet."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This code initializes an Express.js server and sets up middleware to handle request body parsing. It prepares the server to handle REST API endpoints for the PublicToilets use case."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"express"})," module is imported to create an instance of the Express application."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"body-parser"})," module is imported to parse incoming request bodies."]}),"\n",(0,r.jsxs)(n.li,{children:["An instance of the Express application is created using ",(0,r.jsx)(n.code,{children:"express()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["The server will listen on port ",(0,r.jsx)(n.code,{children:"3002"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Middleware is added to the application using ",(0,r.jsx)(n.code,{children:"app.use()"}),". The ",(0,r.jsx)(n.code,{children:"body-parser"})," middleware is used to parse the request body in both JSON and URL-encoded formats."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"test-rest-endpoints",children:"Test Rest Endpoints"}),"\n",(0,r.jsx)(n.p,{children:"You can test these CRUD operations using tools like Postman or cURL by sending HTTP requests to the corresponding endpoints. For example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["To retrieve all toilets, send a GET request to ",(0,r.jsx)(n.code,{children:"http://localhost:3002/api/public-toilets"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["To create a new toilet, send a POST request to ",(0,r.jsx)(n.code,{children:"http://localhost:3002/api/public-toilets"})," with the toilet details in the request body."]}),"\n",(0,r.jsxs)(n.li,{children:["To update a toilet, send a PUT request to ",(0,r.jsx)(n.code,{children:"http://localhost:3002/api/public-toilets/:id"})," with the updated toilet details in the request body and the toilet ID as a parameter."]}),"\n",(0,r.jsxs)(n.li,{children:["To delete a toilet, send a DELETE request to ",(0,r.jsx)(n.code,{children:"http://localhost:3002/api/public-toilets/:id"})," with the toilet ID as a parameter."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Here are some examples"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["First, make sure the ",(0,r.jsx)(n.code,{children:"node server.js"})," app is running."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"POST a new public toilet:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'curl -X POST \\\nhttp://localhost:3002/public-toilets \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n        "name": "Public Toilet 1",\n        "location": "Sample City, Sample State, Sample Country"\n    }\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"This should insert the new toilet record in the H2 Database. You can add 2-3 more records with different data."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"GET all public toilets:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"curl -X GET http://localhost:3002/public-toilets\n"})}),"\n",(0,r.jsx)(n.p,{children:"This should return all the PublicToilet records that were inserted in the previous step."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"GET a specific public toilet by id:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"curl -X GET http://localhost:3002/public-toilets/{'{id}'}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"{'{id}'}"})," with a number. The id is an auto-generated sequential field. Try using numbers starting from 1, based on the number of records present in the database."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"PUT update an existing public toilet:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'curl -X PUT \\\nhttp://localhost:3002/public-toilets/{\'{id}\'} \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n        "name": "Public Toilet New Name",\n        "location": "Sample City, Sample State, Sample Country"\n    }\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"{'{id}'}"})," with a number. This should update the record with the provided id in the database. Try retrieving the record again, and you should see the updated result."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"DELETE a public toilet by id:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"curl -X DELETE http://localhost:3002/public-toilets/{'{id}'}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Again, replace ",(0,r.jsx)(n.code,{children:"{'{id}'}"})," with a number. This should delete the record with the provided id from the database."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"database",children:"Database"}),"\n",(0,r.jsxs)(n.p,{children:["To connect our Express server app with a real database and perform CRUD operations, we need to choose and configure a database system. There are various options available, such as ",(0,r.jsx)(n.code,{children:"MySQL"}),", ",(0,r.jsx)(n.code,{children:"PostgreSQL"}),", ",(0,r.jsx)(n.code,{children:"MongoDB"}),", etc. For this workshop, we will use ",(0,r.jsx)(n.code,{children:"PostgreSQL"}),", which is a popular open-source relational database system."]}),"\n",(0,r.jsx)(n.h3,{id:"install-postgresql-database",children:"Install PostgreSQL Database"}),"\n",(0,r.jsx)(n.p,{children:"Here are the instructions to install and set up PostgreSQL on your local system:"}),"\n",(0,r.jsx)(n.p,{children:"Step 1: Download PostgreSQL"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Visit the PostgreSQL download page: ",(0,r.jsx)(n.a,{href:"https://www.postgresql.org/download/",children:"https://www.postgresql.org/download/"})]}),"\n",(0,r.jsx)(n.li,{children:"Select your operating system (Windows, macOS, or Linux) and download the appropriate installer."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Step 2: Install PostgreSQL"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Run the downloaded installer."}),"\n",(0,r.jsx)(n.li,{children:"Follow the installation wizard prompts."}),"\n",(0,r.jsx)(n.li,{children:"Choose the installation directory and provide a password for the default PostgreSQL user (postgres)."}),"\n",(0,r.jsx)(n.li,{children:"Complete the installation process."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"macOS:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Open the downloaded disk image (.dmg) file."}),"\n",(0,r.jsx)(n.li,{children:"Double-click the PostgreSQL package file (.pkg) to run the installer."}),"\n",(0,r.jsx)(n.li,{children:"Follow the installation wizard prompts."}),"\n",(0,r.jsx)(n.li,{children:"Provide a password for the default PostgreSQL user (postgres) when prompted."}),"\n",(0,r.jsx)(n.li,{children:"Complete the installation process."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Linux:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Refer to the official PostgreSQL documentation for detailed installation instructions specific to your Linux distribution."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Step 3: Verify PostgreSQL Installation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Open the Start menu and search for "pgAdmin." Launch pgAdmin to open the graphical interface for managing PostgreSQL.'}),"\n",(0,r.jsxs)(n.li,{children:["You can also verify the installation by opening the Command Prompt and running the command: ",(0,r.jsx)(n.code,{children:"psql --version"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"macOS and Linux:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Open the terminal and run the command: ",(0,r.jsx)(n.code,{children:"psql --version"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If the installation was successful, you should see the version number of PostgreSQL displayed in the terminal or graphical interface."}),"\n",(0,r.jsx)(n.p,{children:"Step 4: Set Up PostgreSQL Database"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Open the Start menu and search for "pgAdmin." Launch pgAdmin to open the graphical interface.'}),"\n",(0,r.jsx)(n.li,{children:"In the pgAdmin interface, expand the Servers section, then expand PostgreSQL, and finally expand Databases."}),"\n",(0,r.jsx)(n.li,{children:"Right-click on Databases and select Create -> Database."}),"\n",(0,r.jsx)(n.li,{children:'Enter a name for your database (e.g., "public_toilets") and click OK.'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"macOS and Linux:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Open the terminal and run the command: ",(0,r.jsx)(n.code,{children:"createdb public_toilets"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Step 5: Connect to the PostgreSQL Database"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Windows:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"In the pgAdmin interface, expand the Servers section, then expand PostgreSQL, and finally expand Databases."}),"\n",(0,r.jsx)(n.li,{children:'Right-click on your database name (e.g., "public_toilets") and select Connect.'}),"\n",(0,r.jsx)(n.li,{children:"Provide the necessary credentials (username and password) if prompted."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"macOS and Linux:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Open the terminal and run the command: ",(0,r.jsx)(n.code,{children:"psql -U postgres -d public_toilets"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You are now connected to the PostgreSQL database."}),"\n",(0,r.jsx)(n.h3,{id:"learn-postgresql",children:"Learn PostgreSQL"}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:"If you are new to databases and PostgreSQL, the following resource can help you get up to speed quickly:"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL Tutorial by PostgreSQLTutorial.com"}),": This website offers a step-by-step tutorial for beginners to learn PostgreSQL. It covers various topics, including installation, basic SQL queries, data manipulation, and advanced concepts. You can find the tutorial here: ",(0,r.jsx)(n.a,{href:"https://www.postgresqltutorial.com/",children:"PostgreSQL Tutorial"})]}),(0,r.jsx)(n.p,{children:"By following this tutorial, you will gain a solid foundation in working with PostgreSQL and be able to apply your knowledge to the development of your Node.js/Express app."})]}),"\n",(0,r.jsx)(n.h3,{id:"update-nodejsexpress-app-to-use-postgresql",children:"Update Nodejs/Express app to use PostgreSQL"}),"\n",(0,r.jsx)(n.p,{children:"To update your Node.js/Express app to use PostgreSQL, follow these steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Install the required dependencies:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pg"})," package: This is the PostgreSQL client library for Node.js."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dotenv"})," package: This allows us to load environment variables from a ",(0,r.jsx)(n.code,{children:".env"})," file."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can install these dependencies by running the following command in your project directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install pg dotenv\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.code,{children:".env"})," file in your project directory. This file will store your environment variables. Add the following variables to the ",(0,r.jsx)(n.code,{children:".env"})," file: ",(0,r.jsx)(n.a,{href:"/blog/dotenv-files-nodejs-expressjs",children:"Learn more about ENV file here"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dotenv",children:"DB_HOST=your_database_host\nDB_PORT=your_database_port\nDB_NAME=your_database_name\nDB_USER=your_database_user\nDB_PASSWORD=your_database_password\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"your_database_host"}),", ",(0,r.jsx)(n.code,{children:"your_database_port"}),", ",(0,r.jsx)(n.code,{children:"your_database_name"}),", ",(0,r.jsx)(n.code,{children:"your_database_user"}),", and ",(0,r.jsx)(n.code,{children:"your_database_password"})," with your actual PostgreSQL database connection details."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Update your ",(0,r.jsx)(n.code,{children:"server.js"})," file with the following code:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst bodyParser = require('body-parser');\nconst { Pool } = require('pg');\nrequire('dotenv').config();\n\nconst app = express();\nconst port = 3002;\n\n// Middleware\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\n\n// Create a connection pool\nconst pool = new Pool({\n  host: process.env.DB_HOST,\n  port: process.env.DB_PORT,\n  database: process.env.DB_NAME,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD\n});\n\n// Test the database connection\npool.connect((err, client, release) => {\n  if (err) {\n    return console.error('Error acquiring client', err.stack);\n  }\n  console.log('Connected to PostgreSQL database');\n  client.release();\n});\n\n// Define your routes and handlers here...\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server is running on port ${port}`);\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This code sets up a connection pool using the ",(0,r.jsx)(n.code,{children:"pg"})," package and the environment variables defined in the ",(0,r.jsx)(n.code,{children:".env"})," file. It also tests the database connection to ensure it's working properly."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," Make sure to replace the route definitions and handlers with your own code for CRUD operations and other routes specific to your application."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Now you can run your Node.js/Express app using the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"node server.js\n"})}),"\n",(0,r.jsx)(n.p,{children:"Your app will now be connected to PostgreSQL, and you can start building your CRUD operations and other functionality using the database."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"update-public-toilets-crud-operation",children:"Update public toilets CRUD operation"}),"\n",(0,r.jsx)(n.p,{children:"To update the CRUD operations for the PublicToilets app to use a PostgreSQL database, you need to make the following changes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"server.js"})," file with the following code:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst bodyParser = require('body-parser');\nconst { Pool } = require('pg');\nrequire('dotenv').config();\n\nconst app = express();\nconst port = 3002;\n\n// Middleware\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\n\n// Create a connection pool\nconst pool = new Pool({\n  host: process.env.DB_HOST,\n  port: process.env.DB_PORT,\n  database: process.env.DB_NAME,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD\n});\n\n// Test the database connection\npool.connect((err, client, release) => {\n  if (err) {\n    return console.error('Error acquiring client', err.stack);\n  }\n  console.log('Connected to PostgreSQL database');\n  client.release();\n});\n\n// Routes and handlers for CRUD operations\napp.get('/api/toilets', (req, res) => {\n  // Implement the logic to fetch all toilets from the database using the pool.query() method\n});\n\napp.get('/api/toilets/:id', (req, res) => {\n  // Implement the logic to fetch a specific toilet by ID from the database using the pool.query() method\n});\n\napp.post('/api/toilets', (req, res) => {\n  // Implement the logic to create a new toilet in the database using the pool.query() method\n});\n\napp.put('/api/toilets/:id', (req, res) => {\n  // Implement the logic to update a specific toilet by ID in the database using the pool.query() method\n});\n\napp.delete('/api/toilets/:id', (req, res) => {\n  // Implement the logic to delete a specific toilet by ID from the database using the pool.query() method\n});\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server is running on port ${port}`);\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Replace the placeholder comments with the actual implementation code for each route and CRUD operation using the ",(0,r.jsx)(n.code,{children:"pool.query()"})," method provided by the ",(0,r.jsx)(n.code,{children:"pg"})," package. The ",(0,r.jsx)(n.code,{children:"pool.query()"})," method allows you to execute SQL queries against the PostgreSQL database."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," Make sure to handle errors, validate request data, and sanitize input to prevent SQL injection attacks."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Implement the logic for each CRUD operation in the appropriate route handler."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Here's an example of how you can implement the logic for fetching all toilets:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"app.get('/api/toilets', (req, res) => {\n  pool.query('SELECT * FROM toilets', (err, result) => {\n    if (err) {\n      console.error('Error executing query', err.stack);\n      res.status(500).json({ error: 'An error occurred while fetching toilets' });\n    } else {\n      res.json(result.rows);\n    }\n  });\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This example executes a ",(0,r.jsx)(n.code,{children:"SELECT"})," query to fetch all rows from the ",(0,r.jsx)(n.code,{children:"toilets"})," table in the database and sends the results as JSON response to the client."]}),"\n",(0,r.jsx)(n.p,{children:"Create the POST route to store the public toilet in the database:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Create a new public toilet\n// POST route to store a public toilet\napp.post('/public-toilets', async (req, res) => {\n  try {\n    const { name, location } = req.body;\n\n    const query = 'INSERT INTO toilets (name, location) VALUES ($1, $2) RETURNING *';\n    const values = [name, location];\n\n    const result = await pool.query(query, values);\n\n    res.status(201).json(result.rows[0]);\n  } catch (error) {\n    console.error('Error while adding a toilet:', error);\n    res.status(500).json({ error: 'Error while adding a toilet' });\n  }\n});\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Repeat the above step for each CRUD operation, updating the corresponding route handler to execute the appropriate SQL query."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Enabling CORS (Cross-Origin Resource Sharing) in an Express app allows the server to handle requests coming from different origins (domains) than the one the server is hosted on. This is important when you have a frontend application running on a different domain than your backend API."}),"\n",(0,r.jsx)(n.h2,{id:"enable-cors",children:"Enable CORS"}),"\n",(0,r.jsxs)(n.p,{children:["To enable CORS (Cross-Origin Resource Sharing) in your Express app, you can use the ",(0,r.jsx)(n.code,{children:"cors"})," middleware. First, you'll need to install the ",(0,r.jsx)(n.code,{children:"cors"})," package: ",(0,r.jsx)(n.a,{href:"/blog/enabling-cors-in-an-express-node.js-app",children:"Learn more about CORS here"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install cors\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then, in your ",(0,r.jsx)(n.code,{children:"server.js"})," file, add the following code to enable CORS:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst bodyParser = require('body-parser');\nconst cors = require('cors'); // Import the cors middleware\nconst pool = require('./db');\n\nconst app = express();\nconst port = 3002;\n\napp.use(cors()); // Enable CORS for all routes\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\n\n// ... Your other routes and middleware ...\n\napp.listen(port, () => {\n  console.log(`Server is running on http://localhost:${port}`);\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["By adding ",(0,r.jsx)(n.code,{children:"app.use(cors())"}),", you are enabling CORS for all routes in your Express app. This will allow requests from any domain to access your backend API."]}),"\n",(0,r.jsx)(n.h2,{id:"github-repo",children:"Github Repo"}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["You can also refer to and clone the code up to this section from the GitHub repository using the ",(0,r.jsx)(n.code,{children:"nodejs-backend"})," branch."]}),(0,r.jsx)(n.p,{children:"To clone the repository, you can use the following command:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone --branch nodejs-backend https://github.com/certifysphere/workshops.git\n"})}),(0,r.jsxs)(n.p,{children:["This will clone the repository and checkout the ",(0,r.jsx)(n.code,{children:"nodejs-backend"})," branch, which contains the code up to this section of the workshop."]}),(0,r.jsxs)(n.p,{children:["You can then navigate to the ",(0,r.jsx)(n.code,{children:"nodejs-backend-rest-api"})," directory to access the Node.Js Backend Rest API Code."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd workshops/reactjs-springboot-workshop/nodejs-backend-rest-api/\n"})})]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);