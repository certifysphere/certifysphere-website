"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[18233],{248:e=>{e.exports=JSON.parse('{"permalink":"/blog/react-python-csv-file-processing-mongo","source":"@site/blog/2023-08-24-react-python-csv-parsing-mongodb.md","title":"Python CSV FIle Processing, Storing Data in MongoDB, View Data in React UI","description":"In this tutorial, we\'ll walk you through building a full-stack web application to visualize USA soccer team data. We\'ll use a Python Flask backend to process publicly avaiable USA soccer team CSV data and store it in a MongoDB database, and a React frontend to display and visualize the data.","date":"2023-08-24T00:00:00.000Z","tags":[{"inline":true,"label":"react","permalink":"/blog/tags/react"},{"inline":true,"label":"python","permalink":"/blog/tags/python"},{"inline":true,"label":"files","permalink":"/blog/tags/files"},{"inline":true,"label":"flask","permalink":"/blog/tags/flask"},{"inline":true,"label":"mongodb","permalink":"/blog/tags/mongodb"},{"inline":true,"label":"restapi","permalink":"/blog/tags/restapi"}],"readingTime":7.23,"hasTruncateMarker":false,"authors":[{"name":"Vishal","socials":{},"key":null,"page":null}],"frontMatter":{"slug":"react-python-csv-file-processing-mongo","title":"Python CSV FIle Processing, Storing Data in MongoDB, View Data in React UI","authors":{"name":"Vishal"},"tags":["react","python","files","flask","mongodb","restapi"]},"unlisted":false,"prevItem":{"title":"Build an Ecomerce App using React for UI,  Python Flask Rest API and Postgres Database","permalink":"/blog/react-python-flask-postgres-ecomerce-app"},"nextItem":{"title":"Build a Todos React App using Python Flask Rest API and MongoDB Database","permalink":"/blog/react-python-flask-mongo-todo-app"}}')},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var a=t(96540);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}},73811:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var a=t(248),s=t(74848),i=t(28453);const r={slug:"react-python-csv-file-processing-mongo",title:"Python CSV FIle Processing, Storing Data in MongoDB, View Data in React UI",authors:{name:"Vishal"},tags:["react","python","files","flask","mongodb","restapi"]},c=void 0,o={authorsImageUrls:[void 0]},d=[{value:"Part 1: Setting Up the Python Backend",id:"part-1-setting-up-the-python-backend",level:3},{value:"Part 2: Building the React Frontend",id:"part-2-building-the-react-frontend",level:3},{value:"Part 3: Running the Application",id:"part-3-running-the-application",level:3}];function l(e){const n={code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"In this tutorial, we'll walk you through building a full-stack web application to visualize USA soccer team data. We'll use a Python Flask backend to process publicly avaiable USA soccer team CSV data and store it in a MongoDB database, and a React frontend to display and visualize the data."}),"\n",(0,s.jsx)(n.h3,{id:"part-1-setting-up-the-python-backend",children:"Part 1: Setting Up the Python Backend"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Install Required Libraries"})}),"\n",(0,s.jsx)(n.p,{children:"Install the necessary libraries for working with CSV files and interacting with MongoDB:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install pandas pymongo flask\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Create the Backend Script"})}),"\n",(0,s.jsxs)(n.p,{children:["Create a Python script named ",(0,s.jsx)(n.code,{children:"process_soccer_data.py"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import pandas as pd\nfrom pymongo import MongoClient\nfrom flask import Flask, jsonify\n\napp = Flask(__name__)\n\n# Read CSV and convert it to a list of dictionaries\ndata = pd.read_csv("https://cdn.jsdelivr.net/gh/gavinr/usa-soccer@master/mls.csv")\n\n# Select desired columns\nselected_columns = [\n    "team", "city", "state", "latitude", "longitude",\n    "stadium", "stadium_capacity", "founded", "joined",\n    "head_coach", "url", "wikipedia_url", "logo_url"\n]\ndata = data[selected_columns]\n\n# Convert data to a list of dictionaries\nrecords = data.to_dict(orient="records")\n\n# Connect to MongoDB\nclient = MongoClient("mongodb://localhost:27017/")\ndb = client["soccer"]\ncollection = db["mls"]\n\n# Insert records into MongoDB\ncollection.insert_many(records)\nprint("Data inserted into MongoDB.")\n\n@app.route(\'/api/soccer\')\ndef get_soccer_data():\n    soccer_data = list(collection.find({}))\n    for item in soccer_data:\n        item[\'_id\'] = str(item[\'_id\'])\n    return jsonify(soccer_data)\n\nif __name__ == \'__main__\':\n    app.run(debug=True)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Let's break down the this Python code step by step to understand what each part is doing. This code sets up a Flask web application that reads data from a CSV file, processes it, stores it in a MongoDB database, and provides a REST API to retrieve the stored soccer team data."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Import Required Libraries"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import pandas as pd\nfrom pymongo import MongoClient\nfrom flask import Flask, jsonify\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pandas"}),": A library used for data manipulation and analysis, including reading CSV files."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pymongo"}),": A library used to interact with MongoDB."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Flask"}),": A micro web framework for building web applications in Python."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Create a Flask App"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"app = Flask(__name__)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Creates a Flask web application instance named ",(0,s.jsx)(n.code,{children:"app"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 3: Read CSV Data"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'data = pd.read_csv("https://cdn.jsdelivr.net/gh/gavinr/usa-soccer@master/mls.csv")\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Uses pandas to read the CSV data from the provided URL and stores it in the ",(0,s.jsx)(n.code,{children:"data"})," variable."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 4: Select Desired Columns"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'selected_columns = [\n    "team", "city", "state", "latitude", "longitude",\n    "stadium", "stadium_capacity", "founded", "joined",\n    "head_coach", "url", "wikipedia_url", "logo_url"\n]\ndata = data[selected_columns]\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Defines a list of column names that are desired from the CSV data."}),"\n",(0,s.jsxs)(n.li,{children:["Filters the ",(0,s.jsx)(n.code,{children:"data"})," DataFrame to keep only the columns listed in ",(0,s.jsx)(n.code,{children:"selected_columns"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 5: Convert Data to Dictionaries"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'records = data.to_dict(orient="records")\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Converts the filtered ",(0,s.jsx)(n.code,{children:"data"})," DataFrame into a list of dictionaries using the ",(0,s.jsx)(n.code,{children:"to_dict"})," method with the ",(0,s.jsx)(n.code,{children:'orient="records"'})," argument."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 6: Connect to MongoDB"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'client = MongoClient("mongodb://localhost:27017/")\ndb = client["soccer"]\ncollection = db["mls"]\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Creates a MongoDB client that connects to a MongoDB server running on the default localhost address and port (",(0,s.jsx)(n.code,{children:"27017"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Defines a database named ",(0,s.jsx)(n.code,{children:"soccer"})," and a collection named ",(0,s.jsx)(n.code,{children:"mls"})," within that database."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 7: Insert Records into MongoDB"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'collection.insert_many(records)\nprint("Data inserted into MongoDB.")\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Inserts the list of dictionaries (",(0,s.jsx)(n.code,{children:"records"}),") into the ",(0,s.jsx)(n.code,{children:"mls"})," collection in the MongoDB database."]}),"\n",(0,s.jsx)(n.li,{children:"Prints a message to indicate that the data insertion is complete."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 8: Define API Endpoint for Soccer Data"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"@app.route('/api/soccer')\ndef get_soccer_data():\n    soccer_data = list(collection.find({}))\n    for item in soccer_data:\n        item['_id'] = str(item['_id'])\n    return jsonify(soccer_data)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Decorates a function to handle requests to the ",(0,s.jsx)(n.code,{children:"/api/soccer"})," endpoint."]}),"\n",(0,s.jsxs)(n.li,{children:["Retrieves all documents from the ",(0,s.jsx)(n.code,{children:"mls"})," collection and converts the MongoDB ",(0,s.jsx)(n.code,{children:"_id"})," to a string format."]}),"\n",(0,s.jsxs)(n.li,{children:["Returns the soccer data as JSON response using the ",(0,s.jsx)(n.code,{children:"jsonify"})," function."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 9: Run the Flask App"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"if __name__ == '__main__':\n    app.run(debug=True)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Checks if the script is being run directly (not imported as a module)."}),"\n",(0,s.jsxs)(n.li,{children:["Starts the Flask development server with the ",(0,s.jsx)(n.code,{children:"debug"})," mode enabled."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This code sets up a Flask web application to read soccer team data from a CSV file, store it in a MongoDB database, and provide a REST API to retrieve the data. It's a basic example and can be further customized and expanded for production use."}),"\n",(0,s.jsx)(n.h3,{id:"part-2-building-the-react-frontend",children:"Part 2: Building the React Frontend"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Set Up the React App"})}),"\n",(0,s.jsx)(n.p,{children:"Create a new React app and navigate to its directory:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx create-react-app soccer-visualization\ncd soccer-visualization\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Install Bootstrap"})}),"\n",(0,s.jsx)(n.p,{children:"Install Bootstrap for styling:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install bootstrap axios\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 3: Update the React UI"})}),"\n",(0,s.jsxs)(n.p,{children:["Replace the contents of ",(0,s.jsx)(n.code,{children:"src/App.js"})," with the following code:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'import React, { useState, useEffect } from "react";\nimport "./App.css";\nimport axios from "axios";\n\nfunction App() {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    fetchSoccerData();\n  }, []);\n\n  const fetchSoccerData = async () => {\n    try {\n      const response = await axios.get("/api/soccer");\n      setData(response.data);\n    } catch (error) {\n      console.error("Error fetching soccer data:", error);\n    }\n  };\n\n  return (\n    <div className="container mt-5">\n      <h1 className="mb-4">USA Soccer Team Data</h1>\n      <div className="row">\n        {data.map((record, index) => (\n          <div key={index} className="col-md-4 mb-4">\n            <div className="card">\n              <div className="card-body">\n                <h5 className="card-title">{record.team}</h5>\n                <p className="card-text">{record.city}, {record.state}</p>\n                <p className="card-text">Stadium: {record.stadium}</p>\n                <a href={record.wikipedia_url} className="btn btn-primary">\n                  Wikipedia\n                </a>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n'})}),"\n",(0,s.jsx)(n.p,{children:"This code is a React component written in JSX, which is used to create the user interface for our soccer team data visualization app. Let's break down the code step by step to understand what each part is doing:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Import Required Libraries"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'import React, { useState, useEffect } from "react";\nimport "./App.css";\nimport axios from "axios";\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Imports React, which is the core library for building UI components."}),"\n",(0,s.jsxs)(n.li,{children:["Imports ",(0,s.jsx)(n.code,{children:"useState"})," and ",(0,s.jsx)(n.code,{children:"useEffect"})," from the ",(0,s.jsx)(n.code,{children:"react"})," module, which are React hooks for managing state and handling side effects, respectively."]}),"\n",(0,s.jsxs)(n.li,{children:["Imports the ",(0,s.jsx)(n.code,{children:"App.css"})," file for styling the component."]}),"\n",(0,s.jsxs)(n.li,{children:["Imports ",(0,s.jsx)(n.code,{children:"axios"}),", a library used for making HTTP requests."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Define the App Component"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'function App() {\n  // State to store soccer data\n  const [data, setData] = useState([]);\n\n  // Fetch data when the component mounts\n  useEffect(() => {\n    fetchSoccerData();\n  }, []);\n\n  // Function to fetch soccer data\n  const fetchSoccerData = async () => {\n    try {\n      const response = await axios.get("/api/soccer");\n      setData(response.data);\n    } catch (error) {\n      console.error("Error fetching soccer data:", error);\n    }\n  };\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Defines the ",(0,s.jsx)(n.code,{children:"App"})," functional component using the arrow function syntax."]}),"\n",(0,s.jsxs)(n.li,{children:["Uses the ",(0,s.jsx)(n.code,{children:"useState"})," hook to create a state variable named ",(0,s.jsx)(n.code,{children:"data"}),", initialized as an empty array."]}),"\n",(0,s.jsxs)(n.li,{children:["Uses the ",(0,s.jsx)(n.code,{children:"useEffect"})," hook to run the ",(0,s.jsx)(n.code,{children:"fetchSoccerData"})," function when the component mounts (similar to ",(0,s.jsx)(n.code,{children:"componentDidMount"})," in class components)."]}),"\n",(0,s.jsxs)(n.li,{children:["Defines the ",(0,s.jsx)(n.code,{children:"fetchSoccerData"})," function, which makes an HTTP GET request to the ",(0,s.jsx)(n.code,{children:"/api/soccer"})," endpoint using ",(0,s.jsx)(n.code,{children:"axios"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["If the request is successful, updates the ",(0,s.jsx)(n.code,{children:"data"})," state with the fetched soccer data."]}),"\n",(0,s.jsx)(n.li,{children:"If there's an error, logs an error message to the console."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 3: Render the UI"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'  return (\n    <div className="container mt-5">\n      <h1 className="mb-4">USA Soccer Team Data</h1>\n      <div className="row">\n        {data.map((record, index) => (\n          <div key={index} className="col-md-4 mb-4">\n            <div className="card">\n              <div className="card-body">\n                <h5 className="card-title">{record.team}</h5>\n                <p className="card-text">{record.city}, {record.state}</p>\n                <p className="card-text">Stadium: {record.stadium}</p>\n                <a href={record.wikipedia_url} className="btn btn-primary">\n                  Wikipedia\n                </a>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns the JSX that defines the user interface of the component."}),"\n",(0,s.jsx)(n.li,{children:"The UI consists of a container with a title and a row of soccer team cards."}),"\n",(0,s.jsxs)(n.li,{children:["Maps over the ",(0,s.jsx)(n.code,{children:"data"})," array using the ",(0,s.jsx)(n.code,{children:"map"})," function to create a card for each soccer team record."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"key"})," attribute is set to the index for efficient rendering."]}),"\n",(0,s.jsx)(n.li,{children:"Displays the team name, city, state, stadium name, and a Wikipedia link for each record."}),"\n",(0,s.jsx)(n.li,{children:"Styling classes from the Bootstrap framework are used for formatting."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 4: Export the Component"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"export default App;\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Exports the ",(0,s.jsx)(n.code,{children:"App"})," component to make it available for other parts of your application."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This React component fetches soccer team data from the ",(0,s.jsx)(n.code,{children:"/api/soccer"})," endpoint using ",(0,s.jsx)(n.code,{children:"axios"}),", stores it in the ",(0,s.jsx)(n.code,{children:"data"})," state, and renders the data as cards with information about each soccer team. The component takes advantage of React hooks for state management and side effects, making it a concise and effective way to handle data fetching and rendering in your app."]}),"\n",(0,s.jsx)(n.h3,{id:"part-3-running-the-application",children:"Part 3: Running the Application"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Run the Backend"})}),"\n",(0,s.jsxs)(n.p,{children:["In a terminal, navigate to the directory containing the ",(0,s.jsx)(n.code,{children:"process_soccer_data.py"})," script and run it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python process_soccer_data.py\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Run the React Frontend"})}),"\n",(0,s.jsxs)(n.p,{children:["In a new terminal window, navigate to the ",(0,s.jsx)(n.code,{children:"soccer-visualization"})," directory and start the React app:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd soccer-visualization\nnpm start\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Your full-stack soccer team data visualization app should now be running! Open your browser and visit ",(0,s.jsx)(n.code,{children:"http://localhost:3000"})," to see the app in action. You should see cards displaying team information, and you can click on the Wikipedia link to access more details."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);